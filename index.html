<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Verse Battle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: #0a001a;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23e879f9' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M9 18V5l12-2v13'%3E%3C/path%3E%3Ccircle cx='6' cy='18' r='3'%3E%3C/circle%3E%3Ccircle cx='18' cy='16' r='3'%3E%3C/circle%3E%3C/svg%3E"), auto;
        }
        
        .title-font {
            font-family: 'Syncopate', sans-serif;
        }
        
        .subtitle-font {
            font-family: 'Montserrat', sans-serif;
        }
        
        .music-card {
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: linear-gradient(135deg, rgba(30, 10, 60, 0.8), rgba(10, 0, 30, 0.9));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(233, 213, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .music-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(to bottom, 
                rgba(233, 213, 255, 0.1) 0%, 
                rgba(233, 213, 255, 0) 5%,
                rgba(233, 213, 255, 0) 95%,
                rgba(233, 213, 255, 0.1) 100%);
            pointer-events: none;
        }
        
        .music-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 10px 30px rgba(233, 213, 255, 0.3);
            border-color: rgba(233, 213, 255, 0.5);
        }
        
        .btn {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(233, 213, 255, 0.6);
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%, -50%);
            transform-origin: 50% 50%;
        }
        
        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(233, 213, 255, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(233, 213, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(233, 213, 255, 0); }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: fall 3s ease-in infinite;
            pointer-events: none;
            z-index: 100;
        }
        
        @keyframes fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .progress-bar {
            height: 6px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #c084fc, #e879f9);
            transition: width 0.5s ease;
        }
        
        .music-image {
            position: relative;
            overflow: hidden;
        }
        
        .music-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.7) 100%);
            z-index: 1;
        }
        
        .glow-border {
            box-shadow: 0 0 20px rgba(233, 213, 255, 0.6);
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(233, 213, 255, 0.6); }
            to { box-shadow: 0 0 30px rgba(216, 180, 254, 0.8); }
        }
        
        /* Heavenly concert background */
        .concert-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            animation: twinkle 5s infinite;
            pointer-events: none;
        }
        
        @keyframes twinkle {
            0% { opacity: 0.2; }
            50% { opacity: 1; }
            100% { opacity: 0.2; }
        }
        
        .sound-waves {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
            opacity: 0.1;
        }
        
        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            background: rgba(233, 213, 255, 0.1);
            border-radius: 50%;
            transform-origin: 50% 100%;
            animation: wave 15s infinite linear;
        }
        
        .wave:nth-child(2) {
            animation-delay: 3s;
            opacity: 0.3;
        }
        
        .wave:nth-child(3) {
            animation-delay: 6s;
            opacity: 0.2;
        }
        
        .wave:nth-child(4) {
            animation-delay: 9s;
            opacity: 0.1;
        }
        
        @keyframes wave {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }
        
        /* Click effect */
        .click-ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(233, 213, 255, 0.4);
            transform: scale(0);
            animation: clickRipple 0.6s linear;
            pointer-events: none;
            z-index: 9999;
        }
        
        @keyframes clickRipple {
            0% {
                transform: scale(0);
                opacity: 0.8;
            }
            100% {
                transform: scale(10);
                opacity: 0;
            }
        }
        
        /* Footer */
        .footer {
            background: linear-gradient(90deg, rgba(10, 0, 26, 0.8), rgba(20, 0, 50, 0.8));
            backdrop-filter: blur(5px);
            border-top: 1px solid rgba(233, 213, 255, 0.2);
        }
        
        .heart {
            display: inline-block;
            animation: heartbeat 1.5s infinite;
            color: #ff3366;
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1); }
            75% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .india-flag {
            display: inline-block;
            margin-left: 5px;
        }
        
        /* Holographic effect */
        .holographic {
            position: relative;
            overflow: hidden;
        }
        
        .holographic::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.05) 25%, 
                rgba(255,255,255,0.1) 50%, 
                rgba(255,255,255,0.05) 75%, 
                rgba(255,255,255,0) 100%);
            animation: holographicShine 3s linear infinite;
            pointer-events: none;
            z-index: 2;
        }
        
        @keyframes holographicShine {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Click effect particles */
        .click-particle {
            position: absolute;
            background: radial-gradient(circle, #e879f9 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transform: translate(-50%, -50%);
        }
        
        @keyframes particleAnimation {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0.8;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }
        
        /* Music card placeholder images */
        .music-placeholder {
            background: linear-gradient(135deg, #1e0a3c 25%, #0a001a 25%, #0a001a 50%, #1e0a3c 50%, #1e0a3c 75%, #0a001a 75%, #0a001a 100%);
            background-size: 20px 20px;
            position: relative;
            overflow: hidden;
        }
        
        .music-placeholder::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(233, 213, 255, 0.2), transparent);
            animation: shine 2s infinite;
        }
        
        @keyframes shine {
            0% { left: -100%; }
            100% { left: 150%; }
        }
        
        /* Neon glow */
        .neon-text {
            text-shadow: 0 0 5px rgba(233, 213, 255, 0.8), 
                         0 0 10px rgba(233, 213, 255, 0.5), 
                         0 0 15px rgba(233, 213, 255, 0.3);
        }
        
        /* Enhanced visual click effect */
        .visual-click {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(233, 213, 255, 0.8) 0%, rgba(233, 213, 255, 0) 70%);
            transform: translate(-50%, -50%) scale(0);
            animation: visualClick 0.5s ease-out forwards;
            pointer-events: none;
            z-index: 9999;
        }
        
        @keyframes visualClick {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }
        
        /* Equalizer animation */
        .equalizer {
            position: fixed;
            bottom: 60px;
            right: 20px;
            display: flex;
            align-items: flex-end;
            height: 30px;
            gap: 3px;
            z-index: 100;
            pointer-events: none;
        }
        
        .equalizer-bar {
            width: 4px;
            background: linear-gradient(to top, #c084fc, #e879f9);
            border-radius: 2px;
        }
        
        @keyframes equalize1 { 0%, 100% { height: 10px; } 50% { height: 25px; } }
        @keyframes equalize2 { 0%, 100% { height: 20px; } 50% { height: 5px; } }
        @keyframes equalize3 { 0%, 100% { height: 15px; } 50% { height: 30px; } }
        @keyframes equalize4 { 0%, 100% { height: 5px; } 50% { height: 20px; } }
        @keyframes equalize5 { 0%, 100% { height: 25px; } 50% { height: 10px; } }
        
        .eq1 { animation: equalize1 0.8s ease-in-out infinite; }
        .eq2 { animation: equalize2 1.0s ease-in-out infinite; }
        .eq3 { animation: equalize3 0.7s ease-in-out infinite; }
        .eq4 { animation: equalize4 0.9s ease-in-out infinite; }
        .eq5 { animation: equalize5 1.1s ease-in-out infinite; }
        
        /* VS badge */
        .vs-badge {
            background: linear-gradient(135deg, #c084fc, #e879f9);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(233, 213, 255, 0.6);
            position: relative;
            z-index: 10;
        }
        
        .vs-badge::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: transparent;
            border: 2px solid rgba(233, 213, 255, 0.3);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        /* Music card title */
        .music-title-bg {
            background: linear-gradient(90deg, rgba(233, 213, 255, 0.1), rgba(216, 180, 254, 0.1));
            border-left: 3px solid #e879f9;
        }
        
        /* Stats bars */
        .stat-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .stat-fill-1 {
            height: 100%;
            background: linear-gradient(90deg, #c084fc, #e879f9);
        }
        
        .stat-fill-2 {
            height: 100%;
            background: linear-gradient(90deg, #60a5fa, #3b82f6);
        }
        
        .stat-fill-3 {
            height: 100%;
            background: linear-gradient(90deg, #f472b6, #ec4899);
        }
        
        /* Music note animation */
        .floating-notes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .music-note {
            position: absolute;
            font-size: 24px;
            color: rgba(233, 213, 255, 0.3);
            animation: floatNote 15s linear infinite;
            pointer-events: none;
        }
        
        @keyframes floatNote {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* CD Vinyl animation */
        .vinyl {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle at center, 
                #000 0%, 
                #000 30%, 
                #333 30%, 
                #333 35%, 
                #000 35%, 
                #000 40%, 
                #333 40%, 
                #333 45%, 
                #000 45%, 
                #000 48%, 
                rgba(0,0,0,0.5) 48%, 
                rgba(0,0,0,0.5) 100%);
            animation: spin 4s linear infinite;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            position: relative;
        }
        
        .vinyl::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 15%;
            height: 15%;
            background: #e879f9;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(233, 213, 255, 0.8);
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Play indicator */
        .play-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .music-card:hover .play-indicator,
        .music-card.playing .play-indicator {
            opacity: 1;
        }
        
        .play-indicator svg {
            width: 20px;
            height: 20px;
            fill: #fff;
        }
        
        /* Music genre tags */
        .genre-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-right: 5px;
            margin-bottom: 5px;
            background: rgba(233, 213, 255, 0.2);
            border: 1px solid rgba(233, 213, 255, 0.3);
        }
        
        /* Artist name */
        .artist-name {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 2px;
        }
        
        /* Music DNA visualization */
        .dna-strand {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1px;
            margin: 20px 0;
        }
        
        .dna-node {
            width: 4px;
            height: 20px;
            background: linear-gradient(to bottom, #c084fc, #e879f9);
            border-radius: 2px;
            position: relative;
        }
        
        .dna-node::before,
        .dna-node::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 2px;
            background: rgba(233, 213, 255, 0.5);
            left: 50%;
            transform: translateX(-50%);
        }
        
        .dna-node::before {
            top: 4px;
        }
        
        .dna-node::after {
            bottom: 4px;
        }
        
        .dna-node:nth-child(even) {
            height: 30px;
        }
        
        .dna-node:nth-child(even)::before {
            top: 6px;
        }
        
        .dna-node:nth-child(even)::after {
            bottom: 6px;
        }
        
        /* Music mood badges */
        .mood-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 5px;
            background: rgba(233, 213, 255, 0.1);
            border: 1px solid rgba(233, 213, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .mood-badge:hover {
            background: rgba(233, 213, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .mood-badge.active {
            background: linear-gradient(135deg, #c084fc, #e879f9);
            box-shadow: 0 0 10px rgba(233, 213, 255, 0.5);
        }
        
        /* Music player animation */
        .music-playing-animation {
            display: flex;
            align-items: flex-end;
            height: 20px;
            gap: 2px;
        }
        
        .music-bar {
            width: 3px;
            background: #e879f9;
            border-radius: 1px;
        }
        
        .music-bar-1 { animation: musicBar 0.8s ease-in-out infinite; }
        .music-bar-2 { animation: musicBar 1.0s ease-in-out infinite; }
        .music-bar-3 { animation: musicBar 0.6s ease-in-out infinite; }
        .music-bar-4 { animation: musicBar 0.9s ease-in-out infinite; }
        
        @keyframes musicBar {
            0%, 100% { height: 5px; }
            50% { height: 20px; }
        }

        /* Added styles from index f.html for song cover and mood badge */
        .song-cover { border-radius: 1.2rem 1.2rem 0 0; width: 100%; height: 14rem; object-fit: cover;}
        .mood-badge { display:inline-block; padding:0.35em 1em;margin:0.2em;border-radius:18px;
            background:rgba(233,213,255,0.07); font-weight:bold;
            border:1px solid rgba(233,213,255,0.14);}
        .mood-badge.active { background:linear-gradient(90deg,#e879f9,#a78bfa); color:white; border-color: #e879f9;}
        @media (max-width:640px) {.song-cover{height:9rem;}}
    </style>
</head>
<body class="text-white">
    <!-- Heavenly Concert Background Elements -->
    <div class="concert-bg"></div>
    <div class="stars" id="stars"></div>
    <div class="sound-waves">
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
    </div>
    <div class="floating-notes" id="floating-notes"></div>
    
    <!-- Equalizer animation -->
    <div class="equalizer">
        <div class="equalizer-bar eq1"></div>
        <div class="equalizer-bar eq2"></div>
        <div class="equalizer-bar eq3"></div>
        <div class="equalizer-bar eq4"></div>
        <div class="equalizer-bar eq5"></div>
    </div>
    
    <div id="app" class="container mx-auto px-4 py-8 max-w-6xl relative">
        <!-- Home Screen -->
        <div id="home-screen" class="flex flex-col items-center justify-center min-h-[80vh] fade-in">
            <h1 class="text-4xl md:text-6xl font-bold text-center mb-6 neon-text title-font tracking-wider">MUSIC VERSE BATTLE</h1>
            <p class="text-lg md:text-xl text-center mb-12 max-w-2xl text-gray-300 subtitle-font">Discover your ultimate favorite song through exciting head-to-head battles in a heavenly concert experience. Your chosen track moves forward to face the next challenger!</p>
            <button id="start-button" class="btn bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 px-10 rounded-lg text-xl shadow-lg subtitle-font holographic">
                START THE CONCERT
            </button>
        </div>

        <!-- Music Battle Screen -->
        <div id="battle-screen" class="hidden fade-in">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-bold mb-3 title-font neon-text">Battle <span id="current-battle">1</span> of <span id="total-battles">159</span></h2>
                <p class="text-gray-300 mb-5 subtitle-font">Choose your favorite track</p>
                <div class="progress-bar w-full max-w-xl mx-auto mb-3">
                    <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                </div>
                <p class="text-sm text-gray-400 subtitle-font">Songs remaining: <span id="songs-remaining">159</span></p>
            </div>
            
            <div class="flex flex-col md:flex-row justify-center items-center gap-8 md:gap-16 my-8">
                <div id="champion-card" class="music-card rounded-xl overflow-hidden shadow-lg w-full md:w-96 slide-in">
                    <img class="song-cover" src="" alt="Champion cover"> <!-- Added song-cover image -->
                    <div class="p-5">
                        <div class="music-title-bg p-3 mb-4">
                            <h3 class="song-title text-xl font-bold title-font">Current Champion</h3>
                            <p class="artist-name subtitle-font">Artist Name</p>
                            <div class="flex flex-wrap mt-2">
                                <span class="genre-tag">Genre</span>
                            </div>
                        </div>
                        <button class="choose-btn btn w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 py-3 px-4 rounded-lg font-medium subtitle-font" data-index="0">
                            Choose This Song
                        </button>
                    </div>
                </div>
                
                <div class="vs-badge title-font text-2xl font-bold">VS</div>
                
                <div id="challenger-card" class="music-card rounded-xl overflow-hidden shadow-lg w-full md:w-96 slide-in">
                    <img class="song-cover" src="" alt="Challenger cover"> <!-- Added song-cover image -->
                    <div class="p-5">
                        <div class="music-title-bg p-3 mb-4">
                            <h3 class="song-title text-xl font-bold title-font">Challenger</h3>
                            <p class="artist-name subtitle-font">Artist Name</p>
                            <div class="flex flex-wrap mt-2">
                                <span class="genre-tag">Genre</span>
                            </div>
                        </div>
                        <button class="choose-btn btn w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 py-3 px-4 rounded-lg font-medium subtitle-font" data-index="1">
                            Choose This Song
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Music DNA Analysis Result Screen -->
        <div id="result-screen" class="hidden fade-in relative">
            <div class="flex flex-col items-center justify-center min-h-[80vh] py-8 relative z-10">
                <!-- Glowing Header -->
                <div class="text-center mb-10">
                    <h2 class="text-4xl md:text-5xl font-bold title-font neon-text mb-3">YOUR MUSIC DNA</h2>
                    <div class="w-60 h-1 bg-gradient-to-r from-purple-500 to-pink-500 mx-auto"></div>
                </div>
                
                <!-- Winner Card with Accents -->
                <div class="relative mb-10">
                    <div class="absolute -top-4 -left-4 w-8 h-8 border-t-2 border-l-2 border-purple-400"></div>
                    <div class="absolute -top-4 -right-4 w-8 h-8 border-t-2 border-r-2 border-pink-500"></div>
                    <div class="absolute -bottom-4 -left-4 w-8 h-8 border-b-2 border-l-2 border-purple-400"></div>
                    <div class="absolute -bottom-4 -right-4 w-8 h-8 border-b-2 border-r-2 border-pink-500"></div>
                    
                    <div id="winner-card" class="music-card rounded-xl overflow-hidden shadow-lg w-full max-w-md slide-in glow-border">
                        <img class="song-cover" src="" alt="Winner Song Cover"> <!-- Added song-cover image -->
                        <div class="p-6">
                            <h3 class="winner-title text-2xl font-bold text-center title-font neon-text">Song Title</h3>
                            <p class="winner-artist text-center subtitle-font text-gray-300 mt-1">Artist Name</p>
                            <div class="flex flex-wrap justify-center mt-3">
                                <span class="genre-tag">Genre</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Music DNA Analysis -->
                <div class="music-card p-6 rounded-xl max-w-2xl mx-auto mb-10 glow-border">
                    <h3 class="text-2xl font-bold mb-4 text-center title-font text-purple-400">YOU ARE A <span id="listener-type" class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500">MELODIC DREAMER</span></h3>
                    
                    <p id="listener-description" class="text-gray-300 text-center mb-6 subtitle-font">Your music DNA reveals a deep appreciation for emotional melodies and atmospheric soundscapes. You connect with music on a profound level, often using it as an escape to create your own inner worlds. Music is not just entertainment for you—it's a companion for your most introspective moments.</p>
                    
                    <!-- DNA Visualization -->
                    <div class="dna-strand">
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                    </div>
                    
                    <!-- Music Preferences -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                        <div>
                            <h4 class="text-center text-purple-300 font-semibold mb-3 subtitle-font">GENRE AFFINITY</h4>
                            <div class="flex flex-col gap-3">
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>EDM</span>
                                        <span id="genre-edm-percent">85%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="genre-edm" class="stat-fill-1" style="width: 85%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>Piano</span>
                                        <span id="genre-piano-percent">65%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="genre-piano" class="stat-fill-2" style="width: 65%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>Jazz</span>
                                        <span id="genre-jazz-percent">45%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="genre-jazz" class="stat-fill-3" style="width: 45%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-center text-purple-300 font-semibold mb-3 subtitle-font">MOOD PREFERENCE</h4>
                            <div id="mood-badges-container" class="flex flex-wrap justify-center">
                                <!-- Mood badges will be dynamically added here -->
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-center text-purple-300 font-semibold mb-3 subtitle-font">LISTENING STYLE</h4>
                            <div class="flex flex-col gap-3">
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>Immersive</span>
                                        <span id="style-immersive-percent">90%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="style-immersive" class="stat-fill-1" style="width: 90%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>Background</span>
                                        <span id="style-background-percent">40%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="style-background" class="stat-fill-2" style="width: 40%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>Social</span>
                                        <span id="style-social-percent">55%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="style-social" class="stat-fill-3" style="width: 55%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex gap-6">
                    <button id="restart-button" class="btn bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-8 rounded-lg text-lg shadow-lg subtitle-font">
                        RESTART
                    </button>
                    <button id="share-button" class="btn bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-3 px-8 rounded-lg text-lg shadow-lg subtitle-font">
                        SHARE RESULT
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="footer fixed bottom-0 left-0 w-full py-3 px-4 text-center text-sm text-gray-400 z-10">
            <p>
                Made with <span class="heart">❤</span> by Barnik Bhai in 
                <span class="india-flag">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="16" viewBox="0 0 24 16" class="inline-block">
                        <rect width="24" height="5" fill="#FF9933"/>
                        <rect y="5" width="24" height="6" fill="#FFFFFF"/>
                        <rect y="11" width="24" height="5" fill="#138808"/>
                        <circle cx="12" cy="8" r="1.5" fill="#000080"/>
                    </svg>
                </span> 
                INDIA
            </p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const songs = [
                {title:"Headlights",artist:"Alok feat. KIDDO",genre:"EDM",mood:"Energetic",mp3:"alok_headlights.mp3",image:"alok_headlights.jpg"},
                {title:"On My Way",artist:"Alan Walker",genre:"EDM",mood:"Motivational",mp3:"alan_walker_on_my_way.mp3",image:"alan_walker_on_my_way.jpg"},
                {title:"Man On The Moon",artist:"Alan Walker",genre:"EDM",mood:"Reflective",mp3:"alan_walker_man_on_the_moon.mp3",image:"alan_walker_man_on_the_moon.jpg"},
                {title:"Paradise",artist:"Alan Walker",genre:"EDM",mood:"Uplifting",mp3:"alan_walker_paradise.mp3",image:"alan_walker_paradise.jpg"},
                {title:"Sing Me to Sleep",artist:"Alan Walker",genre:"EDM",mood:"Melancholic",mp3:"alan_walker_sing_me_to_sleep.mp3",image:"alan_walker_sing_me_to_sleep.jpg"},
                {title:"Fake A Smile",artist:"Alan Walker",genre:"EDM",mood:"Melancholic",mp3:"alan_walker_fake_a_smile.mp3",image:"alan_walker_fake_a_smile.jpg"},
                {title:"All Falls Down",artist:"Alan Walker feat. Juliander",genre:"EDM",mood:"Reflective",mp3:"alan_walker_all_falls_down.mp3",image:"alan_walker_all_falls_down.jpg"},
                {title:"Lost Control",artist:"Alan Walker",genre:"EDM",mood:"Intense",mp3:"alan_walker_lost_control.mp3",image:"alan_walker_lost_control.jpg"},
                {title:"Faded - Lost Stories Remix",artist:"Alan Walker",genre:"EDM",mood:"Energetic",mp3:"alan_walker_faded_lost_stories_remix.mp3",image:"alan_walker_faded_lost_stories_remix.jpg"},
                {title:"Ghost",artist:"Justin Bieber",genre:"Pop",mood:"Melancholic",mp3:"justin_bieber_ghost.mp3",image:"justin_bieber_ghost.jpg"},
                {title:"Bam Bam",artist:"Camila Cabello feat. Ed Sheeran",genre:"Pop",mood:"Upbeat",mp3:"camila_cabello_bam_bam.mp3",image:"camila_cabello_bam_bam.jpg"},
                {title:"Peaches",artist:"Justin Bieber feat. Daniel Caesar & Giveon",genre:"Pop/R&B",mood:"Chill",mp3:"justin_bieber_peaches.mp3",image:"justin_bieber_peaches.jpg"},
                {title:"Unstoppable",artist:"Sia",genre:"Pop",mood:"Motivational",mp3:"sia_unstoppable.mp3",image:"sia_unstoppable.jpg"},
                {title:"We Are One (Ole Ola) [The Official 2014 FIFA World Cup Song]",artist:"Pitbull feat. Jennifer Lopez & Claudia Leitte",genre:"Pop/Latin",mood:"Energetic",mp3:"pitbull_we_are_one.mp3",image:"pitbull_we_are_one.jpg"},
                {title:"Heat Waves",artist:"Glass Animals",genre:"Indie Pop",mood:"Chill",mp3:"glass_animals_heat_waves.mp3",image:"glass_animals_heat_waves.jpg"},
                {title:"Alone",artist:"Alan Walker",genre:"EDM",mood:"Reflective",mp3:"alan_walker_alone.mp3",image:"alan_walker_alone.jpg"},
                {title:"Faded",artist:"Alan Walker",genre:"EDM",mood:"Melancholic",mp3:"alan_walker_faded.mp3",image:"alan_walker_faded.jpg"},
                {title:"Hello World",artist:"Alan Walker",genre:"EDM",mood:"Uplifting",mp3:"alan_walker_hello_world.mp3",image:"alan_walker_hello_world.jpg"},
                {title:"One Summer Day",artist:"Joe Hisaishi",genre:"Anime Soundtrack",mood:"Cinematic",mp3:"joe_hisaishi_one_summer_day.mp3",image:"joe_hisaishi_one_summer_day.jpg"},
                {title:"The Return",artist:"Joe Hisaishi",genre:"Anime Soundtrack",mood:"Cinematic",mp3:"joe_hisaishi_the_return.mp3",image:"joe_hisaishi_the_return.jpg"},
                {title:"Avem (The Aviation Theme)",artist:"Alan Walker",genre:"EDM",mood:"Cinematic",mp3:"alan_walker_avem.mp3",image:"alan_walker_avem.jpg"},
                {title:"Millionaire (Alan Walker Remix)",artist:"Cash Cash feat. Nelly",genre:"EDM",mood:"Energetic",mp3:"cash_cash_millionaire_alan_walker_remix.mp3",image:"cash_cash_millionaire_alan_walker_remix.jpg"},
                {title:"Cradles",artist:"Sub Urban",genre:"Alternative Pop",mood:"Dark",mp3:"sub_urban_cradles.mp3",image:"sub_urban_cradles.jpg"},
                {title:"Different World",artist:"Alan Walker feat. CORSAK",genre:"EDM",mood:"Motivational",mp3:"alan_walker_different_world.mp3",image:"alan_walker_different_world.jpg"},
                {title:"In Your Arms (Alan Walker Remix)",artist:"ILLENIUM with X Ambassadors",genre:"EDM",mood:"Emotional",mp3:"illenium_in_your_arms_alan_walker_remix.mp3",image:"illenium_in_your_arms_alan_walker_remix.jpg"},
                {title:"We'll Be Alright (Movie Edit)",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Hopeful",mp3:"radwimps_well_be_alright_movie_edit.mp3",image:"radwimps_well_be_alright_movie_edit.jpg"},
                {title:"Dreamers [Music from the FIFA World Cup Qatar 2022 Official Soundtrack]",artist:"Jung Kook",genre:"Pop",mood:"Inspirational",mp3:"jung_kook_dreamers.mp3",image:"jung_kook_dreamers.jpg"},
                {title:"Sparkle - English Version",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Romantic",mp3:"radwimps_sparkle_english_version.mp3",image:"radwimps_sparkle_english_version.jpg"},
                {title:"Wednesday Main Titles",artist:"Danny Elfman",genre:"Soundtrack",mood:"Cinematic",mp3:"danny_elfman_wednesday_main_titles.mp3",image:"danny_elfman_wednesday_main_titles.jpg"},
                {title:"Is There Still Anything That Love Can Do? (English Version)",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Reflective",mp3:"radwimps_is_there_still_anything_that_love_can_do_english_version.mp3",image:"radwimps_is_there_still_anything_that_love_can_do_english_version.jpg"},
                {title:"Seasons",artist:"Rival",genre:"EDM",mood:"Uplifting",mp3:"rival_seasons.mp3",image:"rival_seasons.jpg"},
                {title:"We'll Be Alright",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Hopeful",mp3:"radwimps_well_be_alright.mp3",image:"radwimps_well_be_alright.jpg"},
                {title:"Dream Lantern",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Cinematic",mp3:"radwimps_dream_lantern.mp3",image:"radwimps_dream_lantern.jpg"},
                {title:"Sparkle - Original Version",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Romantic",mp3:"radwimps_sparkle_original_version.mp3",image:"radwimps_sparkle_original_version.jpg"},
                {title:"Dream Lantern - English Version",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Cinematic",mp3:"radwimps_dream_lantern_english_version.mp3",image:"radwimps_dream_lantern_english_version.jpg"},
                {title:"Nandemonaiya - movie ver.",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Melancholic",mp3:"radwimps_nandemonaiya_movie_ver.mp3",image:"radwimps_nandemonaiya_movie_ver.jpg"},
                {title:"Bloody Mary",artist:"Lady Gaga",genre:"Pop",mood:"Intense",mp3:"lady_gaga_bloody_mary.mp3",image:"lady_gaga_bloody_mary.jpg"},
                {title:"Zenzenzense - movie ver.",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Energetic",mp3:"radwimps_zenzenzense_movie_ver.mp3",image:"radwimps_zenzenzense_movie_ver.jpg"},
                {title:"STAY",artist:"The Kid LAROI with Justin Bieber",genre:"Pop",mood:"Upbeat",mp3:"the_kid_laroi_stay.mp3",image:"the_kid_laroi_stay.jpg"},
                {title:"Running Out Of Roses",artist:"Alan Walker",genre:"EDM",mood:"Reflective",mp3:"alan_walker_running_out_of_roses.mp3",image:"alan_walker_running_out_of_roses.jpg"},
                {title:"Savannah",artist:"Diviners",genre:"EDM",mood:"Chill",mp3:"diviners_savannah.mp3",image:"diviners_savannah.jpg"},
                {title:"Opening Song - Merry-Go-Round of Life",artist:"Joe Hisaishi",genre:"Anime Soundtrack",mood:"Cinematic",mp3:"joe_hisaishi_merry_go_round_of_life.mp3",image:"joe_hisaishi_merry_go_round_of_life.jpg"},
                {title:"Is There Still Anything That Love Can Do?",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Reflective",mp3:"radwimps_is_there_still_anything_that_love_can_do.mp3",image:"radwimps_is_there_still_anything_that_love_can_do.jpg"},
                {title:"DARKSIDE",artist:"Neoni",genre:"Electronic Pop",mood:"Intense",mp3:"neoni_darkside.mp3",image:"neoni_darkside.jpg"},
                {title:"Bones",artist:"Imagine Dragons",genre:"Rock",mood:"Energetic",mp3:"imagine_dragons_bones.mp3",image:"imagine_dragons_bones.jpg"},
                {title:"Enemy (from the series Arcane League of Legends)",artist:"Imagine Dragons with JID",genre:"Rock/Rap",mood:"Intense",mp3:"imagine_dragons_enemy.mp3",image:"imagine_dragons_enemy.jpg"},
                {title:"Believer",artist:"Imagine Dragons",genre:"Rock",mood:"Motivational",mp3:"imagine_dragons_believer.mp3",image:"imagine_dragons_believer.jpg"},
                {title:"Side by Side",artist:"BewhY",genre:"Hip-Hop",mood:"Energetic",mp3:"bewhy_side_by_side.mp3",image:"bewhy_side_by_side.jpg"},
                {title:"Stranger Things (Alan Walker Remix)",artist:"Kygo feat. OneRepublic",genre:"EDM",mood:"Uplifting",mp3:"kygo_stranger_things_alan_walker_remix.mp3",image:"kygo_stranger_things_alan_walker_remix.jpg"},
                {title:"Dar um Jeito (We Will Find a Way) [The Official 2014 FIFA World Cup Anthem]",artist:"Carlos Santana feat. Avicii & Alexandre Pires",genre:"Pop/EDM",mood:"Inspirational",mp3:"carlos_santana_dar_um_jeito.mp3",image:"carlos_santana_dar_um_jeito.jpg"},
                {title:"Cheap Thrills",artist:"Sia",genre:"Pop",mood:"Upbeat",mp3:"sia_cheap_thrills.mp3",image:"sia_cheap_thrills.jpg"},
                {title:"KANATA HALUKA",artist:"RADWIMPS",genre:"Anime Soundtrack",mood:"Cinematic",mp3:"radwimps_kanata_haluka.mp3",image:"radwimps_kanata_haluka.jpg"},
                {title:"Demons",artist:"Imagine Dragons",genre:"Rock",mood:"Reflective",mp3:"imagine_dragons_demons.mp3",image:"imagine_dragons_demons.jpg"},
                {title:"Suzume",artist:"RADWIMPS feat. Toaka",genre:"Anime Soundtrack",mood:"Emotional",mp3:"radwimps_suzume.mp3",image:"radwimps_suzume.jpg"},
                {title:"アイドル",artist:"YOASOBI",genre:"J-Pop",mood:"Energetic",mp3:"yoasobi_idol.mp3",image:"yoasobi_idol.jpg"},
                {title:"メフィスト",artist:"QUEEN BEE",genre:"Anime Rock",mood:"Intense",mp3:"queen_bee_mephisto.mp3",image:"queen_bee_mephisto.jpg"},
                {title:"夜に駆ける",artist:"YOASOBI",genre:"J-Pop",mood:"Emotional",mp3:"yoasobi_yoru_ni_kakeru.mp3",image:"yoasobi_yoru_ni_kakeru.jpg"},
                {title:"Heathens",artist:"Twenty One Pilots",genre:"Alternative Rock",mood:"Dark",mp3:"twenty_one_pilots_heathens.mp3",image:"twenty_one_pilots_heathens.jpg"},
                {title:"祝福",artist:"YOASOBI",genre:"Anime Soundtrack",mood:"Uplifting",mp3:"yoasobi_shukufuku.mp3",image:"yoasobi_shukufuku.jpg"},
                {title:"Infinity",artist:"Jaymes Young",genre:"Pop",mood:"Romantic",mp3:"jaymes_young_infinity.mp3",image:"jaymes_young_infinity.jpg"},
                {title:"群青",artist:"YOASOBI",genre:"J-Pop",mood:"Motivational",mp3:"yoasobi_gunjo.mp3",image:"yoasobi_gunjo.jpg"},
                {title:"Love Yourself",artist:"Justin Bieber",genre:"Pop",mood:"Reflective",mp3:"justin_bieber_love_yourself.mp3",image:"justin_bieber_love_yourself.jpg"},
                {title:"The Nights",artist:"Avicii",genre:"EDM",mood:"Motivational",mp3:"avicii_the_nights.mp3",image:"avicii_the_nights.jpg"},
                {title:"Royalty",artist:"Egzod",genre:"EDM",mood:"Epic",mp3:"egzod_royalty.mp3",image:"egzod_royalty.jpg"},
                {title:"No Lie",artist:"Sean Paul",genre:"Dancehall/Pop",mood:"Upbeat",mp3:"sean_paul_no_lie.mp3",image:"sean_paul_no_lie.jpg"},
                {title:"WITHOUT YOU",artist:"The Kid LAROI",genre:"Pop",mood:"Melancholic",mp3:"the_kid_laroi_without_you.mp3",image:"the_kid_laroi_without_you.jpg"},
                {title:"Aurora",artist:"K-391",genre:"EDM",mood:"Chill",mp3:"k391_aurora.mp3",image:"k391_aurora.jpg"},
                {title:"Legends Never Die - (Remix)",artist:"League of Legends",genre:"Electronic/Rock",mood:"Epic",mp3:"league_of_legends_legends_never_die_remix.mp3",image:"league_of_legends_legends_never_die_remix.jpg"},
                {title:"Lemon",artist:"Kenshi Yonezu",genre:"J-Pop",mood:"Melancholic",mp3:"kenshi_yonezu_lemon.mp3",image:"kenshi_yonezu_lemon.jpg"},
                {title:"Lonely World",artist:"K-391",genre:"EDM",mood:"Reflective",mp3:"k391_lonely_world.mp3",image:"k391_lonely_world.jpg"},
                {title:"Bad Liar",artist:"Imagine Dragons",genre:"Rock",mood:"Emotional",mp3:"imagine_dragons_bad_liar.mp3",image:"imagine_dragons_bad_liar.jpg"},
                {title:"Waiting For Love",artist:"Avicii",genre:"EDM",mood:"Uplifting",mp3:"avicii_waiting_for_love.mp3",image:"avicii_waiting_for_love.jpg"},
                {title:"The Spectre",artist:"Alan Walker",genre:"EDM",mood:"Energetic",mp3:"alan_walker_the_spectre.mp3",image:"alan_walker_the_spectre.jpg"},
                {title:"Move Your Body (Alan Walker Remix)",artist:"Sia",genre:"EDM",mood:"Upbeat",mp3:"sia_move_your_body_alan_walker_remix.mp3",image:"sia_move_your_body_alan_walker_remix.jpg"},
                {title:"あの夢をなぞって",artist:"YOASOBI",genre:"J-Pop",mood:"Reflective",mp3:"yoasobi_ano_yume_wo_nazotte.mp3",image:"yoasobi_ano_yume_wo_nazotte.jpg"},
                {title:"Natural",artist:"Imagine Dragons",genre:"Rock",mood:"Motivational",mp3:"imagine_dragons_natural.mp3",image:"imagine_dragons_natural.jpg"},
                {title:"KICK BACK",artist:"Kenshi Yonezu",genre:"Anime Rock",mood:"Intense",mp3:"kenshi_yonezu_kick_back.mp3",image:"kenshi_yonezu_kick_back.jpg"},
                {title:"Pasoori",artist:"Ali Sethi",genre:"Pop/Folk",mood:"Upbeat",mp3:"ali_sethi_pasoori.mp3",image:"ali_sethi_pasoori.jpg"},
                {title:"More Than You Know",artist:"Axwell /\\ Ingrosso",genre:"EDM",mood:"Uplifting",mp3:"axwell_ingrosso_more_than_you_know.mp3",image:"axwell_ingrosso_more_than_you_know.jpg"},
                {title:"End of Time",artist:"K-391",genre:"EDM",mood:"Uplifting",mp3:"k391_end_of_time.mp3",image:"k391_end_of_time.jpg"},
                {title:"I Ain't Worried",artist:"OneRepublic",genre:"Pop",mood:"Chill",mp3:"onerepublic_i_aint_worried.mp3",image:"onerepublic_i_aint_worried.jpg"},
                {title:"Warriors",artist:"Imagine Dragons",genre:"Rock",mood:"Epic",mp3:"imagine_dragons_warriors.mp3",image:"imagine_dragons_warriors.jpg"},
                {title:"The Last of Us",artist:"Gustavo Santaolalla",genre:"Soundtrack",mood:"Cinematic",mp3:"gustavo_santaolalla_the_last_of_us.mp3",image:"gustavo_santaolalla_the_last_of_us.jpg"},
                {title:"INDUSTRY BABY",artist:"Lil Nas X feat. Jack Harlow",genre:"Hip-Hop",mood:"Energetic",mp3:"lil_nas_x_industry_baby.mp3",image:"lil_nas_x_industry_baby.jpg"},
                {title:"Toxic",artist:"BoyWithUke",genre:"Alternative Pop",mood:"Dark",mp3:"boywithuke_toxic.mp3",image:"boywithuke_toxic.jpg"},
                {title:"勇者",artist:"YOASOBI",genre:"Anime Soundtrack",mood:"Inspirational",mp3:"yoasobi_yusha.mp3",image:"yoasobi_yusha.jpg"},
                {title:"Without You",artist:"Avicii feat. Sandro Cavazza",genre:"EDM",mood:"Emotional",mp3:"avicii_without_you.mp3",image:"avicii_without_you.jpg"},
                {title:"Thunder",artist:"Imagine Dragons",genre:"Rock",mood:"Energetic",mp3:"imagine_dragons_thunder.mp3",image:"imagine_dragons_thunder.jpg"},
                {title:"Counting Stars",artist:"OneRepublic",genre:"Pop/Rock",mood:"Uplifting",mp3:"onerepublic_counting_stars.mp3",image:"onerepublic_counting_stars.jpg"},
                {title:"Hayya Hayya (Better Together) - Music from the FIFA World Cup Qatar 2022 Official Soundtrack",artist:"Trinidad Cardona",genre:"Pop",mood:"Inspirational",mp3:"trinidad_cardona_hayya_hayya.mp3",image:"trinidad_cardona_hayya_hayya.jpg"},
                {title:"Sunflower - Spider-Man: Into the Spider-Verse",artist:"Post Malone",genre:"Hip-Hop/Pop",mood:"Chill",mp3:"post_malone_sunflower.mp3",image:"post_malone_sunflower.jpg"},
                {title:"What's Up Danger",artist:"Blackway with Black Caviar",genre:"Hip-Hop",mood:"Intense",mp3:"blackway_whats_up_danger.mp3",image:"blackway_whats_up_danger.jpg"},
                {title:"Blue Moon",artist:"Paul Hand",genre:"Instrumental Pop",mood:"Chill",mp3:"paul_hand_blue_moon.mp3",image:"paul_hand_blue_moon.jpg"},
                {title:"Circles",artist:"Post Malone",genre:"Hip-Hop/Pop",mood:"Reflective",mp3:"post_malone_circles.mp3",image:"post_malone_circles.jpg"},
                {title:"Pirates Of The Caribbean - Main Theme - He's A Pirate",artist:"Geek Music",genre:"Soundtrack",mood:"Cinematic",mp3:"geek_music_pirates_of_the_caribbean.mp3",image:"geek_music_pirates_of_the_caribbean.jpg"},
                {title:"恋愛サーキュレーション",artist:"物語シリーズ",genre:"Anime Pop",mood:"Upbeat",mp3:"monogatari_series_renai_circulation.mp3",image:"monogatari_series_renai_circulation.jpg"},
                {title:"Lucid Dreams",artist:"Juice WRLD",genre:"Hip-Hop",mood:"Melancholic",mp3:"juice_wrld_lucid_dreams.mp3",image:"juice_wrld_lucid_dreams.jpg"},
                {title:"Fire - Official UEFA EURO 2024 Song",artist:"MEDUZA",genre:"EDM",mood:"Energetic",mp3:"meduza_fire.mp3",image:"meduza_fire.jpg"},
                {title:"As It Was",artist:"Harry Styles",genre:"Pop",mood:"Reflective",mp3:"harry_styles_as_it_was.mp3",image:"harry_styles_as_it_was.jpg"},
                {title:"Story of My Life",artist:"One Direction",genre:"Pop",mood:"Emotional",mp3:"one_direction_story_of_my_life.mp3",image:"one_direction_story_of_my_life.jpg"},
                {title:"WRONG",artist:"The Kid LAROI feat. Lil Mosey",genre:"Hip-Hop",mood:"Melancholic",mp3:"the_kid_laroi_wrong.mp3",image:"the_kid_laroi_wrong.jpg"},
                {title:"Sorry",artist:"Justin Bieber",genre:"Pop",mood:"Upbeat",mp3:"justin_bieber_sorry.mp3",image:"justin_bieber_sorry.jpg"},
                {title:"Levels",artist:"Avicii",genre:"EDM",mood:"Energetic",mp3:"avicii_levels.mp3",image:"avicii_levels.jpg"},
                {title:"Hey Brother",artist:"Avicii",genre:"EDM",mood:"Inspirational",mp3:"avicii_hey_brother.mp3",image:"avicii_hey_brother.jpg"},
                {title:"Alone, Pt. II",artist:"Alan Walker",genre:"EDM",mood:"Reflective",mp3:"alan_walker_alone_pt_ii.mp3",image:"alan_walker_alone_pt_ii.jpg"},
                {title:"Heading Home",artist:"Alan Walker",genre:"EDM",mood:"Hopeful",mp3:"alan_walker_heading_home.mp3",image:"alan_walker_heading_home.jpg"},
                {title:"Shape of You",artist:"Ed Sheeran",genre:"Pop",mood:"Upbeat",mp3:"ed_sheeran_shape_of_you.mp3",image:"ed_sheeran_shape_of_you.jpg"},
                {title:"Lily",artist:"Alan Walker",genre:"EDM",mood:"Uplifting",mp3:"alan_walker_lily.mp3",image:"alan_walker_lily.jpg"},
                {title:"Ignite",artist:"Alan Walker",genre:"EDM",mood:"Energetic",mp3:"alan_walker_ignite.mp3",image:"alan_walker_ignite.jpg"},
                {title:"The Drum",artist:"Alan Walker",genre:"EDM",mood:"Upbeat",mp3:"alan_walker_the_drum.mp3",image:"alan_walker_the_drum.jpg"},
                {title:"The Days",artist:"Avicii",genre:"EDM",mood:"Uplifting",mp3:"avicii_the_days.mp3",image:"avicii_the_days.jpg"},
                {title:"Arcade",artist:"Duncan Laurence",genre:"Pop",mood:"Melancholic",mp3:"duncan_laurence_arcade.mp3",image:"duncan_laurence_arcade.jpg"},
                {title:"Wake Me Up",artist:"Avicii",genre:"EDM/Folk",mood:"Inspirational",mp3:"avicii_wake_me_up.mp3",image:"avicii_wake_me_up.jpg"},
                {title:"Lonely Together",artist:"Avicii feat. Rita Ora",genre:"EDM",mood:"Emotional",mp3:"avicii_lonely_together.mp3",image:"avicii_lonely_together.jpg"},
                {title:"Blinding Lights",artist:"The Weeknd",genre:"Synth-Pop",mood:"Upbeat",mp3:"the_weeknd_blinding_lights.mp3",image:"the_weeknd_blinding_lights.jpg"},
                {title:"Starboy",artist:"The Weeknd",genre:"Hip-Hop/Pop",mood:"Chill",mp3:"the_weeknd_starboy.mp3",image:"the_weeknd_starboy.jpg"},
                {title:"I Had Some Help",artist:"Post Malone feat. Morgan Wallen",genre:"Pop/Country",mood:"Upbeat",mp3:"post_malone_i_had_some_help.mp3",image:"post_malone_i_had_some_help.jpg"},
                {title:"がらくた - JUNK",artist:"Kenshi Yonezu",genre:"J-Pop",mood:"Reflective",mp3:"kenshi_yonezu_garakuta.mp3",image:"kenshi_yonezu_garakuta.jpg"},
                {title:"Ma Meilleure Ennemie (from the series Arcane League of Legends)",artist:"Stromae",genre:"Pop",mood:"Intense",mp3:"stromae_ma_meilleure_ennemie.mp3",image:"stromae_ma_meilleure_ennemie.jpg"},
                {title:"Remember Me (from the series Arcane League of Legends)",artist:"d4vd",genre:"Pop",mood:"Melancholic",mp3:"d4vd_remember_me.mp3",image:"d4vd_remember_me.jpg"},
                {title:"Wasteland (from the series Arcane League of Legends)",artist:"Royal & the Serpent",genre:"Alternative",mood:"Dark",mp3:"royal_and_the_serpent_wasteland.mp3",image:"royal_and_the_serpent_wasteland.jpg"},
                {title:"The Line (from the series Arcane League of Legends)",artist:"Twenty One Pilots",genre:"Alternative Rock",mood:"Reflective",mp3:"twenty_one_pilots_the_line.mp3",image:"twenty_one_pilots_the_line.jpg"},
                {title:"To Ashes and Blood (from the series Arcane League of Legends)",artist:"Woodkid",genre:"Soundtrack",mood:"Cinematic",mp3:"woodkid_to_ashes_and_blood.mp3",image:"woodkid_to_ashes_and_blood.jpg"},
                {title:"Spin The Wheel (from the series Arcane League of Legends)",artist:"Arcane",genre:"Soundtrack",mood:"Intense",mp3:"arcane_spin_the_wheel.mp3",image:"arcane_spin_the_wheel.jpg"},
                {title:"Bella Ciao - Música Original de la Serie la Casa de Papel/ Money Heist",artist:"Manu Pilas",genre:"Soundtrack",mood:"Intense",mp3:"manu_pilas_bella_ciao.mp3",image:"manu_pilas_bella_ciao.jpg"},
                {title:"I Don't Wanna Wait",artist:"David Guetta",genre:"EDM",mood:"Energetic",mp3:"david_guetta_i_dont_wanna_wait.mp3",image:"david_guetta_i_dont_wanna_wait.jpg"},
                {title:"Watermelon Sugar",artist:"Harry Styles",genre:"Pop",mood:"Upbeat",mp3:"harry_styles_watermelon_sugar.mp3",image:"harry_styles_watermelon_sugar.jpg"},
                {title:"Stars Will Align",artist:"Kygo",genre:"EDM",mood:"Chill",mp3:"kygo_stars_will_align.mp3",image:"kygo_stars_will_align.jpg"},
                {title:"Paint The Town Blue (from the series Arcane League of Legends)",artist:"Ashnikko",genre:"Hip-Hop",mood:"Intense",mp3:"ashnikko_paint_the_town_blue.mp3",image:"ashnikko_paint_the_town_blue.jpg"},
                {title:"A Sky Full of Stars",artist:"Coldplay",genre:"Pop/Rock",mood:"Uplifting",mp3:"coldplay_a_sky_full_of_stars.mp3",image:"coldplay_a_sky_full_of_stars.jpg"},
                {title:"Hymn for the Weekend",artist:"Coldplay",genre:"Pop/Rock",mood:"Upbeat",mp3:"coldplay_hymn_for_the_weekend.mp3",image:"coldplay_hymn_for_the_weekend.jpg"},
                {title:"Closer",artist:"The Chainsmokers",genre:"Pop/EDM",mood:"Romantic",mp3:"the_chainsmokers_closer.mp3",image:"the_chainsmokers_closer.jpg"},
                {title:"Heaven",artist:"Avicii",genre:"EDM",mood:"Emotional",mp3:"avicii_heaven.mp3",image:"avicii_heaven.jpg"},
                {title:"Save Your Tears (Remix) (with Ariana Grande) - Bonus Track",artist:"The Weeknd",genre:"Synth-Pop",mood:"Upbeat",mp3:"the_weeknd_save_your_tears_remix.mp3",image:"the_weeknd_save_your_tears_remix.jpg"},
                {title:"Baby",artist:"Justin Bieber",genre:"Pop",mood:"Upbeat",mp3:"justin_bieber_baby.mp3",image:"justin_bieber_baby.jpg"},
                {title:"Strongest (Alan Walker Remix)",artist:"Ina Wroldsen",genre:"EDM",mood:"Motivational",mp3:"ina_wroldsen_strongest_alan_walker_remix.mp3",image:"ina_wroldsen_strongest_alan_walker_remix.jpg"},
                {title:"Broken Arrows",artist:"Avicii",genre:"EDM",mood:"Motivational",mp3:"avicii_broken_arrows.mp3",image:"avicii_broken_arrows.jpg"},
                {title:"Something Just Like This",artist:"The Chainsmokers",genre:"Pop/EDM",mood:"Romantic",mp3:"the_chainsmokers_something_just_like_this.mp3",image:"the_chainsmokers_something_just_like_this.jpg"},
                {title:"Rise Up",artist:"TheFatRat",genre:"EDM",mood:"Epic",mp3:"thefatrat_rise_up.mp3",image:"thefatrat_rise_up.jpg"},
                {title:"Treat You Better",artist:"Shawn Mendes",genre:"Pop",mood:"Emotional",mp3:"shawn_mendes_treat_you_better.mp3",image:"shawn_mendes_treat_you_better.jpg"},
                {title:"On & On",artist:"Cartoon",genre:"EDM",mood:"Uplifting",mp3:"cartoon_on_and_on.mp3",image:"cartoon_on_and_on.jpg"},
                {title:"Sunshine",artist:"OneRepublic",genre:"Pop",mood:"Upbeat",mp3:"onerepublic_sunshine.mp3",image:"onerepublic_sunshine.jpg"},
                {title:"Viva La Vida",artist:"Coldplay",genre:"Pop/Rock",mood:"Epic",mp3:"coldplay_viva_la_vida.mp3",image:"coldplay_viva_la_vida.jpg"},
                {title:"Happier",artist:"Marshmello",genre:"EDM/Pop",mood:"Emotional",mp3:"marshmello_happier.mp3",image:"marshmello_happier.jpg"},
                {title:"Let Her Go",artist:"Passenger",genre:"Folk Pop",mood:"Melancholic",mp3:"passenger_let_her_go.mp3",image:"passenger_let_her_go.jpg"},
                {title:"Let Me Down Slowly",artist:"Alec Benjamin",genre:"Pop",mood:"Melancholic",mp3:"alec_benjamin_let_me_down_slowly.mp3",image:"alec_benjamin_let_me_down_slowly.jpg"},
                {title:"7 Years",artist:"Lukas Graham",genre:"Pop",mood:"Reflective",mp3:"lukas_graham_7_years.mp3",image:"lukas_graham_7_years.jpg"},
                {title:"Superheroes",artist:"The Script",genre:"Pop/Rock",mood:"Motivational",mp3:"the_script_superheroes.mp3",image:"the_script_superheroes.jpg"},
                {title:"Hall of Fame",artist:"The Script feat. will.i.am",genre:"Pop/Rock",mood:"Inspirational",mp3:"the_script_hall_of_fame.mp3",image:"the_script_hall_of_fame.jpg"},
                {title:"L'escut al pit (cant oficial del 125è aniversari del Barça)",artist:"FC Barcelona",genre:"Anthem",mood:"Inspirational",mp3:"fc_barcelona_lescut_al_pit.mp3",image:"fc_barcelona_lescut_al_pit.jpg"},
                {title:"Sapphire",artist:"Ed Sheeran",genre:"Pop",mood:"Reflective",mp3:"ed_sheeran_sapphire.mp3",image:"ed_sheeran_sapphire.jpg"},
                {title:"Night Changes",artist:"One Direction",genre:"Pop",mood:"Reflective",mp3:"one_direction_night_changes.mp3",image:"one_direction_night_changes.jpg"},
                {title:"Yellow",artist:"Coldplay",genre:"Pop/Rock",mood:"Romantic",mp3:"coldplay_yellow.mp3",image:"coldplay_yellow.jpg"},
                {title:"For the First Time",artist:"The Script",genre:"Pop/Rock",mood:"Reflective",mp3:"the_script_for_the_first_time.mp3",image:"the_script_for_the_first_time.jpg"},
                {title:"The Scientist",artist:"Coldplay",genre:"Pop/Rock",mood:"Melancholic",mp3:"coldplay_the_scientist.mp3",image:"coldplay_the_scientist.jpg"},
                {title:"Nothing",artist:"The Script",genre:"Pop/Rock",mood:"Melancholic",mp3:"the_script_nothing.mp3",image:"the_script_nothing.jpg"},
                {title:"Paradise",artist:"Coldplay",genre:"Pop/Rock",mood:"Uplifting",mp3:"coldplay_paradise.mp3",image:"coldplay_paradise.jpg"},
                {title:"Animals",artist:"Martin Garrix",genre:"EDM",mood:"Energetic",mp3:"martin_garrix_animals.mp3",image:"martin_garrix_animals.jpg"},
                {title:"Clarity",artist:"Zedd feat. Foxes",genre:"EDM",mood:"Emotional",mp3:"zedd_clarity.mp3",image:"zedd_clarity.jpg"},
                {title:"Feel So Close",artist:"Calvin Harris",genre:"EDM",mood:"Uplifting",mp3:"calvin_harris_feel_so_close.mp3",image:"calvin_harris_feel_so_close.jpg"},
                {title:"Don't Start Now",artist:"Dua Lipa",genre:"Pop",mood:"Upbeat",mp3:"dua_lipa_dont_start_now.mp3",image:"dua_lipa_dont_start_now.jpg"},
                {title:"Bad Guy",artist:"Billie Eilish",genre:"Pop",mood:"Dark",mp3:"billie_eilish_bad_guy.mp3",image:"billie_eilish_bad_guy.jpg"},
                {title:"Takeaway",artist:"The Chainsmokers & ILLENIUM feat. Lennon Stella",genre:"EDM/Pop",mood:"Emotional",mp3:"the_chainsmokers_illenium_takeaway.mp3",image:"the_chainsmokers_illenium_takeaway.jpg"},
                {title:"I Wanna Be Yours",artist:"Arctic Monkeys",genre:"Indie Rock",mood:"Romantic",mp3:"arctic_monkeys_i_wanna_be_yours.mp3",image:"arctic_monkeys_i_wanna_be_yours.jpg"},
                {title:"Perfect",artist:"Ed Sheeran",genre:"Pop/Ballad",mood:"Romantic",mp3:"ed_sheeran_perfect.mp3",image:"ed_sheeran_perfect.jpg"},
                {title:"Bad Habits",artist:"Ed Sheeran",genre:"Pop/Dance",mood:"Upbeat",mp3:"ed_sheeran_bad_habits.mp3",image:"ed_sheeran_bad_habits.jpg"},
                {title:"Paris",artist:"The Chainsmokers",genre:"EDM/Pop",mood:"Reflective",mp3:"the_chainsmokers_paris.mp3",image:"the_chainsmokers_paris.jpg"},
                {title:"Rockstar",artist:"Post Malone feat. 21 Savage",genre:"Hip-Hop/Trap",mood:"Chill",mp3:"post_malone_rockstar.mp3",image:"post_malone_rockstar.jpg"}
            ];
            
            // Music categories for analysis (from !DOCTYPE html.txt)
            const musicCategories = {
                edm: ["Get Lucky", "Closer", "Party Rock Anthem", "Believe", "Smack My Bitch Up"],
                rock: ["Bohemian Rhapsody", "Hotel California", "Sweet Child O' Mine", "Purple Haze", "Stairway to Heaven", "My Generation", "London Calling", "Born to Run", "Sympathy for the Devil", "Gimme Shelter", "Every Breath You Take", "Seven Nation Army", "Beautiful Day", "Killing in the Name", "With or Without You", "Welcome to the Jungle", "Pour Some Sugar on Me", "Walk This Way", "London Calling", "Satisfaction", "Johnny B. Goode", "Jailhouse Rock", "Great Balls of Fire"],
                pop: ["Imagine", "Billie Jean", "Thriller", "Yesterday", "Good Vibrations", "I Want to Hold Your Hand", "Dancing Queen", "Vogue", "Shape of You", "Despacito", "Bad Guy", "Blinding Lights", "Dance Monkey", "Someone You Loved", "Shallow", "Thank U, Next", "Havana", "Thinking Out Loud", "Happy", "Wrecking Ball", "Rolling in the Deep", "Call Me Maybe", "Firework", "Just Dance", "I Gotta Feeling", "Poker Face", "Single Ladies", "SexyBack", "Toxic", "...Baby One More Time", "Believe", "My Heart Will Go On", "Wannabe", "Like a Prayer", "Karma Chameleon", "I Wanna Dance with Somebody", "Take On Me", "Everybody Wants to Rule the World", "Don't You (Forget About Me)", "Dancing Queen", "Imagine"],
                hiphop: ["Sicko Mode", "God's Plan", "In Da Club", "Lose Yourself", "Hey Ya!", "Stan", "Ms. Jackson", "Gangsta's Paradise", "Nuthin' but a 'G' Thang"],
                rnb: ["Respect", "What's Going On", "River Deep - Mountain High", "Killing Me Softly", "Crazy in Love", "Yeah!", "No Scrubs", "Waterfalls"],
                alternative: ["Creep", "Losing My Religion", "Wonderwall", "Bitter Sweet Symphony", "Smells Like Teen Spirit", "Karma Police", "Zombie", "Mr. Brightside", "Somebody That I Used to Know", "Clocks", "Basket Case", "Loser"],
                soul: ["Respect", "Superstition", "What's Going On", "River Deep - Mountain High", "Killing Me Softly", "Crazy", "Rehab"],
                electronic: ["Get Lucky", "Closer", "Smack My Bitch Up", "Sweet Dreams (Are Made of This)", "Tainted Love"],
                folk: ["Blowin' in the Wind", "Bridge Over Troubled Water", "Hallelujah"],
                jazz: ["Superstition", "What's Going On"]
            };
            
            // Music moods for analysis (from !DOCTYPE html.txt)
            const musicMoods = {
                energetic: ["Billie Jean", "Smells Like Teen Spirit", "Superstition", "What'd I Say", "Born to Run", "Hey Ya!", "Seven Nation Army", "Uptown Funk", "Party Rock Anthem", "Yeah!", "Livin' la Vida Loca", "Welcome to the Jungle", "Long Tall Sally"],
                melancholic: ["Yesterday", "Hallelujah", "Nothing Compares 2 U", "Someone You Loved", "Wrecking Ball", "My Heart Will Go On", "Love Will Tear Us Apart"],
                uplifting: ["Good Vibrations", "Dancing Queen", "Bridge Over Troubled Water", "Firework", "Beautiful Day", "I Wanna Dance with Somebody"],
                romantic: ["God Only Knows", "Thinking Out Loud", "My Heart Will Go On", "With or Without You"],
                rebellious: ["Smells Like Teen Spirit", "My Generation", "London Calling", "Royals", "Killing in the Name", "Jailhouse Rock"],
                nostalgic: ["Sweet Child O' Mine", "Waterloo Sunset", "Blinding Lights", "Closer", "Blueberry Hill"],
                breakup: ["Nothing Compares 2 U", "Wrecking Ball", "Rolling in the Deep", "Somebody That I Used to Know", "Love Will Tear Us Apart"]
            };
            
            // Listener types based on music preferences (from !DOCTYPE html.txt)
            const listenerTypes = [
                {
                    type: "RHYTHM ENTHUSIAST",
                    description: "Your music DNA reveals a deep connection to rhythm and beat. You're drawn to music that makes you move, whether it's the pulsing energy of EDM or the groove of funk and R&B. For you, music is a physical experience that energizes and invigorates.",
                    genres: { edm: 90, rock: 40, pop: 60, hiphop: 75, rnb: 85, alternative: 30, electronic: 80, folk: 0, jazz: 0 }, // Added missing genres
                    moods: ["energetic", "uplifting"]
                },
                {
                    type: "MELODIC DREAMER",
                    description: "Your music DNA reveals a deep appreciation for emotional melodies and atmospheric soundscapes. You connect with music on a profound level, often using it as an escape to create your own inner worlds. Music is not just entertainment for you—it's a companion for your most introspective moments.",
                    genres: { pop: 75, rock: 60, alternative: 85, folk: 90, electronic: 65, jazz: 70, edm: 0, hiphop: 0, rnb: 0 }, // Added missing genres
                    moods: ["melancholic", "nostalgic", "romantic"]
                },
                {
                    type: "LYRICAL ANALYST",
                    description: "Your music DNA shows you value the poetry and storytelling in songs. You listen closely to lyrics and appreciate artists who craft meaningful narratives and express complex emotions through their words. For you, music is a form of literature that speaks directly to your experiences and thoughts.",
                    genres: { folk: 95, rock: 70, hiphop: 80, alternative: 85, pop: 50, rnb: 65, edm: 0, electronic: 0, jazz: 0 }, // Added missing genres
                    moods: ["melancholic", "rebellious", "breakup"]
                },
                {
                    type: "GENRE EXPLORER",
                    description: "Your music DNA reveals an eclectic taste that transcends genre boundaries. You're curious and open-minded, always seeking new sounds and musical experiences. Rather than sticking to one style, you appreciate the unique qualities each genre brings and how they reflect different cultures and eras.",
                    genres: { rock: 75, jazz: 75, electronic: 75, hiphop: 75, alternative: 75, pop: 75, folk: 75, edm: 75, rnb: 75 }, // Added missing genres
                    moods: ["energetic", "melancholic", "uplifting", "rebellious"]
                },
                {
                    type: "EMOTIONAL RESONATOR",
                    description: "Your music DNA shows you use music primarily as an emotional outlet and mirror. You're drawn to songs that validate your feelings and help you process life's highs and lows. Music serves as your emotional companion, providing comfort during difficult times and amplifying your joy during good ones.",
                    genres: { pop: 85, rock: 70, rnb: 90, folk: 80, alternative: 75, edm: 0, hiphop: 0, electronic: 0, jazz: 0 }, // Added missing genres
                    moods: ["romantic", "breakup", "melancholic", "uplifting"]
                }
            ];
            
            // Music state
            let remainingSongs = [...songs];
            let currentChampion = null;
            let battleCount = 0;
            let totalBattles = songs.length - 1;
            let currentlyPlaying = null;
            let audioPlayer = new Audio(); // Added audio player

            // DOM elements
            const homeScreen = document.getElementById('home-screen');
            const battleScreen = document.getElementById('battle-screen');
            const resultScreen = document.getElementById('result-screen');
            const startButton = document.getElementById('start-button');
            const restartButton = document.getElementById('restart-button');
            const shareButton = document.getElementById('share-button');
            const currentBattleEl = document.getElementById('current-battle');
            const totalBattlesEl = document.getElementById('total-battles');
            const songsRemainingEl = document.getElementById('songs-remaining');
            const progressFill = document.getElementById('progress-fill');
            const moodBadgesContainer = document.getElementById('mood-badges-container'); // Added mood badges container

            // Initial setup for total battles display
            totalBattlesEl.textContent = totalBattles;
            
            // Initialize stars
            function createStars() {
                const starsContainer = document.getElementById('stars');
                for (let i = 0; i < 200; i++) {
                    const star = document.createElement('div');
                    star.classList.add('star');
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    star.style.width = `${Math.random() * 2 + 1}px`;
                    star.style.height = star.style.width;
                    star.style.animationDelay = `${Math.random() * 5}s`;
                    starsContainer.appendChild(star);
                }
            }
            
            // Initialize floating music notes
            function createFloatingNotes() {
                const notesContainer = document.getElementById('floating-notes');
                const notes = ['♪', '♫', '♬', '♩', '♭', '♮', '♯'];
                
                for (let i = 0; i < 30; i++) {
                    const note = document.createElement('div');
                    note.classList.add('music-note');
                    note.textContent = notes[Math.floor(Math.random() * notes.length)];
                    note.style.left = `${Math.random() * 100}%`;
                    note.style.animationDelay = `${Math.random() * 15}s`;
                    note.style.animationDuration = `${15 + Math.random() * 10}s`;
                    note.style.opacity = `${Math.random() * 0.5 + 0.1}`;
                    note.style.fontSize = `${Math.random() * 20 + 15}px`;
                    notesContainer.appendChild(note);
                }
            }
            
            // Click effect
            document.addEventListener('click', function(e) {
                // Create ripple effect
                const ripple = document.createElement('div');
                ripple.classList.add('click-ripple');
                ripple.style.left = `${e.pageX}px`;
                ripple.style.top = `${e.pageY}px`;
                document.body.appendChild(ripple);
                
                // Create visual click effect
                const visualClick = document.createElement('div');
                visualClick.classList.add('visual-click');
                visualClick.style.left = `${e.pageX}px`;
                visualClick.style.top = `${e.pageY}px`;
                document.body.appendChild(visualClick);
                
                // Create particles
                const colors = ['#c084fc', '#e879f9', '#60a5fa', '#f472b6', '#a78bfa'];
                for (let i = 0; i < 8; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('click-particle');
                    particle.style.width = `${Math.random() * 10 + 5}px`;
                    particle.style.height = particle.style.width;
                    particle.style.left = `${e.pageX}px`;
                    particle.style.top = `${e.pageY}px`;
                    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.animation = `particleAnimation ${Math.random() * 0.6 + 0.4}s forwards`;
                    document.body.appendChild(particle);
                    
                    // Random direction
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 100 + 50;
                    const x = Math.cos(angle) * distance;
                    const y = Math.sin(angle) * distance;
                    
                    setTimeout(() => {
                        particle.style.transform = `translate(${x}px, ${y}px) scale(${Math.random() * 0.5 + 0.5})`;
                        particle.style.opacity = '0';
                    }, 10);
                    
                    // Remove particle after animation
                    setTimeout(() => {
                        particle.remove();
                    }, 1000);
                }
                
                // Remove ripple after animation
                setTimeout(() => {
                    ripple.remove();
                }, 600);
                
                // Remove visual click after animation
                setTimeout(() => {
                    visualClick.remove();
                }, 500);
            });
            
            // Start battle
            function startGameFromHome() {
                remainingSongs = [...songs]; // Reset remaining songs for a new game
                shuffleArray(remainingSongs);

                // Check if there are enough songs to start the game
                if (remainingSongs.length < 2) {
                    alert("Not enough songs to start the game! Please add more songs.");
                    return; // Exit the function if not enough songs
                }

                homeScreen.classList.add('hidden');
                resultScreen.classList.add('hidden');
                battleScreen.classList.remove('hidden');
                currentChampion = null; // Reset champion for a new game
                battleCount = 0; // Reset battle count
                totalBattles = songs.length - 1; // Total battles for 168 songs
                totalBattlesEl.textContent = totalBattles; // Update display
                startBattle();
            }

            function startBattle() {
                if (!currentChampion) currentChampion = remainingSongs.shift();
                const challenger = remainingSongs.shift();
                updateBattleUI(currentChampion, challenger);
            }
            
            // Update battle UI
            function updateBattleUI(champion, challenger) {
                battleCount++;
                currentBattleEl.textContent = battleCount;
                totalBattlesEl.textContent = totalBattles;
                songsRemainingEl.textContent = remainingSongs.length;
                
                // Update progress bar
                const progress = (battleCount / totalBattles) * 100;
                progressFill.style.width = `${progress}%`;
                
                // Update song cards
                const championCardEl = document.getElementById('champion-card');
                const challengerCardEl = document.getElementById('challenger-card');

                championCardEl.dataset.song = JSON.stringify(champion);
                championCardEl.querySelector('.song-title').textContent = champion.title;
                championCardEl.querySelector('.artist-name').textContent = champion.artist;
                championCardEl.querySelector('.genre-tag').textContent = champion.genre;
                championCardEl.querySelector('.song-cover').src = champion.image;
                championCardEl.querySelector('.song-cover').alt = champion.title + " Cover";
                
                challengerCardEl.dataset.song = JSON.stringify(challenger);
                challengerCardEl.querySelector('.song-title').textContent = challenger.title;
                challengerCardEl.querySelector('.artist-name').textContent = challenger.artist;
                challengerCardEl.querySelector('.genre-tag').textContent = challenger.genre;
                challengerCardEl.querySelector('.song-cover').src = challenger.image;
                challengerCardEl.querySelector('.song-cover').alt = challenger.title + " Cover";
                
                // Stop music
                document.querySelectorAll('.music-card').forEach(card => card.classList.remove('playing'));
                currentlyPlaying = null;
                audioPlayer.pause();
                audioPlayer.currentTime = 0;
            }
            
            // Generate a pseudo-random background for songs (kept from !DOCTYPE html.txt but not used with song covers)
            function generateSongBackground(songTitle) {
                let hash = 0;
                for (let i = 0; i < songTitle.length; i++) {
                    hash = songTitle.charCodeAt(i) + ((hash << 5) - hash);
                }
                const h = Math.abs(hash % 360);
                const s = 70 + (hash % 20);
                const l = 20 + (hash % 15);
                return `linear-gradient(135deg, hsl(${h}, ${s}%, ${l}%), hsl(${(h + 30) % 360}, ${s}%, ${l - 10}%))`;
            }
            
            // Choose winner
            function chooseWinner(index) {
                const championSong = JSON.parse(document.getElementById('champion-card').dataset.song);
                const challengerSong = JSON.parse(document.getElementById('challenger-card').dataset.song);
                const winner = index === 0 ? championSong : challengerSong;
                
                // Update champion
                currentChampion = winner;
                
                // Check if battle is over
                if (remainingSongs.length === 0) {
                    showResult(winner);
                } else {
                    startBattle();
                }
            }
            
            // Show result
            function showResult(winner) {
                battleScreen.classList.add('hidden');
                resultScreen.classList.remove('hidden');
                
                // Update winner card
                const winnerCardEl = document.getElementById('winner-card');
                winnerCardEl.querySelector('.song-cover').src = winner.image;
                winnerCardEl.querySelector('.song-cover').alt = winner.title + " Cover";
                winnerCardEl.querySelector('.winner-title').textContent = winner.title;
                winnerCardEl.querySelector('.winner-artist').textContent = winner.artist;
                winnerCardEl.querySelector('.genre-tag').textContent = winner.genre;
                
                // Analyze listener type based on winner
                const listenerType = analyzeListenerType(winner);
                document.getElementById('listener-type').textContent = listenerType.type;
                document.getElementById('listener-description').textContent = listenerType.description;
                
                // Update genre stats (using the original !DOCTYPE html.txt structure)
                document.getElementById('genre-edm').style.width = `${listenerType.genres.edm || 0}%`;
                document.getElementById('genre-edm-percent').textContent = `${listenerType.genres.edm || 0}%`;
                
                document.getElementById('genre-piano').style.width = `${listenerType.genres.folk || 0}%`; // Mapping folk to piano for display
                document.getElementById('genre-piano-percent').textContent = `${listenerType.genres.folk || 0}%`;
                
                document.getElementById('genre-jazz').style.width = `${listenerType.genres.jazz || 0}%`;
                document.getElementById('genre-jazz-percent').textContent = `${listenerType.genres.jazz || 0}%`;
                
                // Update mood badges
                const allUniqueMoods = [...new Set(songs.map(song=>song.mood))];
                moodBadgesContainer.innerHTML = "";
                allUniqueMoods.forEach(mood => {
                    const badge = document.createElement('div');
                    badge.className = 'mood-badge';
                    badge.textContent = mood;
                    if (mood === winner.mood) badge.classList.add('active');
                    moodBadgesContainer.appendChild(badge);
                });

                // Update listening style (static demo from !DOCTYPE html.txt)
                document.getElementById('style-immersive').style.width = `90%`;
                document.getElementById('style-immersive-percent').textContent = `90%`;
                document.getElementById('style-background').style.width = `40%`;
                document.getElementById('style-background-percent').textContent = `40%`;
                document.getElementById('style-social').style.width = `55%`;
                document.getElementById('style-social-percent').textContent = `55%`;

                // Create confetti celebration
                createConfetti();

                // Stop music
                document.querySelectorAll('.music-card').forEach(card => card.classList.remove('playing'));
                currentlyPlaying = null;
                audioPlayer.pause();
                audioPlayer.currentTime = 0;
            }
            
            // Analyze listener type based on winner
            function analyzeListenerType(winner) {
                // Find which category the winner belongs to
                let winnerGenre = '';
                for (const [genre, songsInCat] of Object.entries(musicCategories)) {
                    if (songsInCat.includes(winner.title)) {
                        winnerGenre = genre;
                        break;
                    }
                }
                
                let winnerMood = '';
                for (const [mood, songsInMood] of Object.entries(musicMoods)) {
                    if (songsInMood.includes(winner.title)) {
                        winnerMood = mood;
                        break;
                    }
                }
                
                // Find best matching listener type
                let bestMatch = listenerTypes[0];
                let highestScore = -1; // Initialize with a value lower than any possible score
                
                for (const type of listenerTypes) {
                    let score = 0;
                    
                    // Score based on genre
                    if (winnerGenre && type.genres[winnerGenre] !== undefined) {
                        score += type.genres[winnerGenre];
                    }
                    
                    // Score based on mood
                    if (winnerMood && type.moods.includes(winnerMood)) {
                        score += 50; // Arbitrary score for mood match
                    }
                    
                    if (score > highestScore) {
                        highestScore = score;
                        bestMatch = type;
                    }
                }
                
                return bestMatch;
            }
            
            // Create confetti celebration
            function createConfetti() {
                const colors = ['#c084fc', '#e879f9', '#60a5fa', '#f472b6', '#a78bfa'];
                
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.width = `${Math.random() * 10 + 5}px`;
                    confetti.style.height = `${Math.random() * 10 + 5}px`;
                    confetti.style.animationDuration = `${Math.random() * 2 + 2}s`;
                    confetti.style.animationDelay = `${Math.random() * 2}s`;
                    
                    document.body.appendChild(confetti);
                    
                    // Remove confetti after animation
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }
            }
            
            // Restart
            function restartBattle() {
                // Reset game state
                remainingSongs = [...songs];
                currentChampion = null;
                battleCount = 0;
                
                // Shuffle songs
                shuffleArray(remainingSongs);
                
                // Show home screen
                resultScreen.classList.add('hidden');
                homeScreen.classList.remove('hidden');

                // Stop music
                audioPlayer.pause();
                audioPlayer.currentTime = 0;
            }
            
            // Share result
            function shareResult() {
                const dnaSection = document.getElementById('dna-section'); // Assuming you add an ID to the DNA analysis section
                if (dnaSection) {
                    html2canvas(dnaSection, {backgroundColor: null}).then(function(canvas){
                        canvas.toBlob(function(blob){
                            const link = document.createElement('a');
                            link.download = 'my-music-dna.png';
                            link.href = URL.createObjectURL(blob);
                            link.click();
                            setTimeout(()=>URL.revokeObjectURL(link.href), 5000);
                        });
                    });
                } else {
                    const winner = document.querySelector('.winner-title').textContent;
                    const artist = document.querySelector('.winner-artist').textContent;
                    const listenerType = document.getElementById('listener-type').textContent;
                    alert(`My ultimate favorite song is "${winner}" by ${artist} and I'm a ${listenerType}! Play the Music Verse Battle to discover yours!`);
                }
            }
            
            // Shuffle array (Fisher-Yates algorithm)
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            
            // Check if user is on mobile device
            function isMobileDevice() {
                return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            }
            
            // Play music (visual effect and actual audio)
            function handleMusicPlay(musicCard) {
                const songData = JSON.parse(musicCard.dataset.song);
                if (currentlyPlaying === musicCard) {
                    if (audioPlayer.paused) {
                        audioPlayer.play();
                        musicCard.classList.add('playing');
                    } else {
                        audioPlayer.pause();
                        musicCard.classList.remove('playing');
                    }
                    return;
                }
                if (currentlyPlaying) currentlyPlaying.classList.remove('playing');
                audioPlayer.pause();
                audioPlayer.currentTime = 0;
                musicCard.classList.add('playing');
                currentlyPlaying = musicCard;
                audioPlayer.src = "mp3s/"+songData.mp3; // Assuming mp3s folder exists
                audioPlayer.play().catch(()=>{});
            }

            // Event listeners
            startButton.addEventListener('click', function(e) {
                e.preventDefault();
                startGameFromHome();
            });
            
            restartButton.addEventListener('click', restartBattle);
            shareButton.addEventListener('click', shareResult);
            
            // Add event listeners to choose buttons
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('choose-btn')) {
                    const index = parseInt(e.target.getAttribute('data-index'));
                    chooseWinner(index);
                }
            });

            // Event listener for music card hover/click
            document.addEventListener(isMobileDevice() ? 'click' : 'mouseover', function(e){
                const card = e.target.closest('.music-card');
                // Only trigger on cards on battle or result
                if (!card || !card.dataset.song || !card.offsetParent) return;
                handleMusicPlay(card);
            });
            
            // Initialize
            createStars();
            createFloatingNotes();
            shuffleArray(remainingSongs);
            
            // Update total battles
            totalBattlesEl.textContent = totalBattles;
        });
    </script>
</body>
</html>
